<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>MindCare Analytics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS principal -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    
    <!--  AJOUT: CSS des corrections (auto-complétion, cartes améliorées, etc.) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/additions.css') }}">
</head>
<body>

<header id="header" class="site-header">
    <div class="container header-inner">
        <div class="logo">
            <span class="logo-mark">MindCare</span>
        </div>
        <nav class="main-nav">
            <a href="#home">Accueil</a>
            <a href="#analytics">Analytics</a>
            <a href="#patients">Données Patients</a>
            <a href="#ml">IA & ML</a>
            <a href="#stats">Statistiques</a>
            <a href="#explore" class="nav-cta">Explorer les Données</a>
        </nav>
    </div>
</header>

<!-- HERO / LANDING -->
<section id="home" class="hero">
    <div class="overlay"></div>
    <div class="container hero-content">
        <div class="hero-left">
            <p class="hero-kicker">Bienvenue sur MindCare Analytics</p>
            <h1>
                Analyse avancée des données<br>
                sur la <span class="accent">dépression</span><br>
                par apprentissage automatique
            </h1>
            <p class="hero-subtitle">
                Plateforme d'analyse de cas de dépression combinant recherche vectorielle,
                machine learning et analyse statistique avancée pour mieux comprendre
                les profils de patients.
            </p>
            <div class="hero-actions">
                <a href="#explore" class="btn primary smoothscroll">Explorer les Données</a>
                <a href="#analytics" class="btn ghost smoothscroll">Recherche avancée</a>
            </div>
        </div>

        <div class="hero-right">
            <div class="dashboard-card">
                <div class="dashboard-header">
                    <h3>Tableau de bord</h3>
                    <span class="badge">Temps réel</span>
                </div>
                <div class="dashboard-metrics">
                    <div class="metric">
                        <span class="metric-label">Patients analysés</span>
                        <span class="metric-value" id="patientsCount">0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Âge moyen</span>
                        <span class="metric-value" id="meanAge">0</span>
                    </div>
                </div>
                <div class="dashboard-footer">
                    <span class="status-dot"></span>
                    <span class="status-text">Connexion au moteur IA…</span>
                </div>
            </div>
        </div>
    </div>

    <div class="scroll-down">
        <span>Scroll down</span>
        <div class="scroll-line"></div>
    </div>
</section>

<!-- ANALYTICS & INSIGHTS -->
<section id="analytics" class="section light">
    <div class="container">
        <div class="section-header">
            <h2>Analytics &amp; Insights</h2>
            <p>
                Visualisation des tendances et patterns dans les données de santé mentale :
                évolution des symptômes, facteurs de risque et trajectoires de soins.
            </p>
        </div>

        <div class="cards-row">
            <article class="card">
                <h3>Analyse en temps réel</h3>
                <p>Surveillance continue des indicateurs de santé mentale avec mise à jour automatique des tableaux de bord.</p>
            </article>
            <article class="card">
                <h3>Tendances prédictives</h3>
                <p>Algorithmes de machine learning pour anticiper l'évolution des indicateurs et détecter les situations à risque.</p>
            </article>
            <article class="card">
                <h3>Données sécurisées</h3>
                <p>Protocoles de sécurité avancés pour la protection des données sensibles des patients.</p>
            </article>
        </div>
    </div>
</section>

<!-- EXPLORER LES DONNÉES : RECHERCHE & VECTOR SEARCH -->
<section id="explore" class="section">
    <div class="container">
        <div class="section-header">
            <h2>Explorer les données</h2>
            <p>
                Recherchez dans la base de données de patients, utilisez la recherche classique
                ou la recherche vectorielle pour retrouver des profils similaires.
            </p>
        </div>

        <div class="search-layout">
            <!-- Recherche classique -->
            <div class="search-panel">
                <h3>Recherche classique</h3>
                <p class="panel-subtitle">
                    Filtrer les dossiers selon des mots-clés (symptômes, diagnostic, traitements, statut, etc.).
                </p>
                <input id="searchInput" type="text"
                       placeholder="Ex. 'anxiété', 'Married', 'Non-smoker', 'Bachelor's Degree'">
                <div id="searchResults" class="results-box">
                    <p class="placeholder">Les résultats de recherche apparaîtront ici.</p>
                </div>
            </div>

            <!-- Recherche vectorielle -->
            <div class="search-panel">
                <h3>Recherche vectorielle avancée</h3>
                <p class="panel-subtitle">Trouver des profils de patients similaires à partir d'une description libre.</p>
                
                <!-- DESCRIPTIONS DES MODÈLES ML (avant recherche) -->
                <div style="margin: 1.5rem 0; padding: 1.5rem; background: rgba(124, 58, 237, 0.08); border-radius: 8px; border: 1px solid rgba(124, 58, 237, 0.3);">
                    <h4 style="margin: 0 0 1rem 0; color: #7c3aed; font-size: 1.1rem; font-weight: 600;">
                         Catégorisation par Intelligence Artificielle
                    </h4>
                    
                    <div style="color: #ddd; line-height: 1.6; font-size: 0.95rem;">
                        <p style="margin-bottom: 1rem;">
                            Notre système utilise <strong>3 algorithmes de Machine Learning</strong> pour catégoriser et filtrer les résultats :
                        </p>
                        
                        <div style="display: grid; gap: 1rem; margin-bottom: 1rem;">
                            <div style="padding: 0.8rem; background: rgba(255,255,255,0.03); border-radius: 6px; border-left: 3px solid #10b981;">
                                <strong style="color: #10b981;"> Random Forest</strong> : Classifie le niveau de risque de dépression (Élevé/Faible) avec un taux de précision de 89%.
                            </div>
                            
                            <div style="padding: 0.8rem; background: rgba(255,255,255,0.03); border-radius: 6px; border-left: 3px solid #3b82f6;">
                                <strong style="color: #3b82f6;"> XGBoost</strong> : Calcule un score de bien-être mental sur 100 points basé sur 13 variables comportementales.
                            </div>
                            
                            <div style="padding: 0.8rem; background: rgba(255,255,255,0.03); border-radius: 6px; border-left: 3px solid #f59e0b;">
                                <strong style="color: #f59e0b;"> K-Means</strong> : Regroupe les patients en 3 clusters selon leurs similarités (Cluster 0: Risque faible, Cluster 1: Risque modéré, Cluster 2: Risque élevé).
                            </div>
                        </div>
                    </div>
                </div>
                
                <textarea id="vectorSearchInput" rows="4"
                          placeholder="Ex. Femme d'une cinquantaine d'années, divorcée, sans emploi, sommeil pauvre et consommation d'alcool modérée."></textarea>
                
                <!-- FILTRES DE CATÉGORISATION ML (6 POINTS) - AGRANDIS -->
                <div style="margin: 1.5rem 0; padding: 2rem; background: rgba(124, 58, 237, 0.1); border-radius: 10px; border: 2px solid rgba(124, 58, 237, 0.4);">
                    <h4 style="margin: 0 0 0.5rem 0; color: #7c3aed; font-size: 1.15rem; font-weight: 600;">
                         Filtres de catégorisation ML (Post-traitement - 6 points)
                    </h4>
                    <p style="color: #bbb; font-size: 0.9rem; margin-bottom: 1.5rem; line-height: 1.5;">
                        Catégorisez les résultats de recherche en appliquant les 3 algorithmes ML ci-dessus. 
                        <br><strong style="color: #7c3aed;">Exemple :</strong> Sélectionnez "Risque Élevé" + "Score < 50" + "Cluster 2" pour identifier les patients à très haut risque nécessitant une attention immédiate.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                        <!-- Filtre 1: Random Forest -->
                        <div style="padding: 1.2rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; border: 1px solid rgba(16, 185, 129, 0.3);">
                            <label style="display: block; color: #10b981; font-size: 0.95rem; font-weight: 600; margin-bottom: 0.8rem;">
                                 Random Forest<br>
                                <span style="font-weight: normal; font-size: 0.85rem; color: #aaa;">Classification du risque</span>
                            </label>
                            <select id="mlFilterRisk" class="form-control" style="width: 100%; padding: 0.7rem; background: #1a1a1a; border: 1px solid #444; border-radius: 6px; color: white; font-size: 0.95rem; cursor: pointer;">
                                <option value="">Tous les niveaux de risque</option>
                                <option value="high"> Risque Élevé uniquement</option>
                                <option value="low"> Risque Faible uniquement</option>
                            </select>
                        </div>
                        
                        <!-- Filtre 2: XGBoost -->
                        <div style="padding: 1.2rem; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3);">
                            <label style="display: block; color: #3b82f6; font-size: 0.95rem; font-weight: 600; margin-bottom: 0.8rem;">
                                 XGBoost<br>
                                <span style="font-weight: normal; font-size: 0.85rem; color: #aaa;">Score de bien-être (0-100)</span>
                            </label>
                            <select id="mlFilterScore" class="form-control" style="width: 100%; padding: 0.7rem; background: #1a1a1a; border: 1px solid #444; border-radius: 6px; color: white; font-size: 0.95rem; cursor: pointer;">
                                <option value="">Tous les scores</option>
                                <option value="low"> Score < 50 (bien-être faible)</option>
                                <option value="high"> Score ≥ 50 (bien-être bon)</option>
                            </select>
                        </div>
                        
                        <!-- Filtre 3: K-Means -->
                        <div style="padding: 1.2rem; background: rgba(245, 158, 11, 0.1); border-radius: 8px; border: 1px solid rgba(245, 158, 11, 0.3);">
                            <label style="display: block; color: #f59e0b; font-size: 0.95rem; font-weight: 600; margin-bottom: 0.8rem;">
                                 K-Means<br>
                                <span style="font-weight: normal; font-size: 0.85rem; color: #aaa;">Clustering par similarité</span>
                            </label>
                            <select id="mlFilterCluster" class="form-control" style="width: 100%; padding: 0.7rem; background: #1a1a1a; border: 1px solid #444; border-radius: 6px; color: white; font-size: 0.95rem; cursor: pointer;">
                                <option value="">Tous les clusters</option>
                                <option value="0"> Cluster 0 (Risque faible)</option>
                                <option value="1"> Cluster 1 (Risque modéré)</option>
                                <option value="2">Cluster 2 (Risque élevé)</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <button id="vectorSearchBtn" class="btn primary full-width" style="font-size: 1.05rem; padding: 1rem;">
                     Lancer la recherche vectorielle
                </button>
                <div id="vectorSearchResults" class="results-box">
                    <p class="placeholder">Les résultats IA apparaîtront ici.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- GESTION DES DONNÉES PATIENTS -->
<section id="patients" class="section light">
    <div class="container">
        <div class="section-header">
            <h2>Gestion des données patients</h2>
            <p>
                Interface centralisée pour consulter, modifier et exporter les informations
                cliniques des patients suivis.
            </p>
        </div>

        <div class="cards-row actions-row">
            <article class="card action-card">
                <h3>Ajouter un patient</h3>
                <p>Création de nouveaux profils patients avec les principales informations cliniques.</p>
                <button class="btn outline" id="btnNewPatient">
                    <i class="icon-plus"></i> Nouveau patient
                </button>
            </article>

            <article class="card action-card">
                <h3>Modifier les données</h3>
                <p>Mise à jour des informations patients, symptômes, diagnostics et traitements.</p>
                <button class="btn outline" id="btnOpenPatients">
                    <i class="icon-folder-open"></i> Ouvrir la liste
                </button>
            </article>

            <article class="card action-card">
                <h3>Exporter les données</h3>
                <p>Export des analyses et indicateurs pour la recherche ou les rapports cliniques.</p>
                <button class="btn outline" id="btnExportPatients">
                    <i class="icon-download"></i> Exporter les patients
                </button>
            </article>
        </div>

        <div class="export-buttons">
            <button class="btn secondary" id="btnExportCsv">Exporter CSV</button>
            <button class="btn secondary" id="btnExportJson">Exporter JSON</button>
        </div>

        <div id="patientsTable" class="table-placeholder">
            <p class="placeholder">
                Lancez une recherche ci-dessus, puis utilisez les boutons "Voir" / "Modifier" sur chaque carte patient.
            </p>
        </div>
    </div>
</section>

<!-- MACHINE LEARNING ET MODÈLES PRÉDICTIFS -->
<section id="ml" class="section">
    <div class="container">
        <div class="section-header">
            <h2>Machine Learning &amp; Modèles Prédictifs</h2>
            <p>
                Algorithmes avancés pour l'analyse prédictive et la classification des données
                de santé mentale.
            </p>
        </div>


        <!-- BOUTONS ML EN HAUT - PLEINE LARGEUR -->
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="display: flex; justify-content: center; gap: 2rem;">
                <button class="btn cluster-btn" data-model="kmeans" style="font-size: 1.3rem; padding: 1.2rem 3rem;">
                    K-Means
                </button>
                <button class="btn cluster-btn" data-model="random_forest" style="font-size: 1.3rem; padding: 1.2rem 3rem;">
                    Random Forest
                </button>
                <button class="btn cluster-btn" data-model="xgboost" style="font-size: 1.3rem; padding: 1.2rem 3rem;">
                    XGBoost
                </button>
            </div>
        </div>

        <!-- GRAPHIQUES GÉANTS EN PLEINE LARGEUR -->
        <div id="clusterResults" class="chart-box" style="width: 100%; min-height: 800px;">
            <p class="placeholder" style="color: white; font-size: 1.2rem;">
                Cliquez sur un modèle ci-dessus pour afficher les visualisations.
            </p>
        </div>

    </div>
</section>

<!-- ANALYSE STATISTIQUE AVANCÉE (EDF) -->
<section id="stats" class="section gradient">
    <div class="container">
        <div class="section-header white">
            <h2>Analyse Statistique Avancée</h2>
            <p>
                Fonction de distribution empirique (EDF) et analyse comparative des variables
                cliniques clés.
            </p>
        </div>

        <div class="edf-layout">
            <div class="edf-controls">
                <h3>Selection de variable</h3>
                <p class="panel-subtitle">
                    Choisissez une variable pour calculer et visualiser sa fonction de distribution empirique.
                </p>

                <select id="edfVariable">
                    <option value="Age">Âge</option>
                    <option value="Income">Revenu</option>
                    <option value="Number of Children">Nombre d'enfants</option>
                </select>

                <button id="calculateEDF" class="btn primary full-width">Calculer l'EDF</button>
            </div>

            <div class="edf-results" id="edfResults">
                <p class="placeholder">Sélectionnez une variable pour visualiser sa distribution.</p>
            </div>
        </div>
    </div>
</section>

<!-- FOOTER -->
<footer class="site-footer">
    <div class="container footer-inner">
        <div>
            <h3>MindCare Analytics</h3>
            <p>Plateforme d'analyse de bien-être mental basée sur les données.</p>
        </div>
        <div class="footer-copy">
            © 2025 MindCare Analytics
        </div>
    </div>
</footer>

<!-- JavaScript -->
<script src="{{ url_for('static', filename='js/jquery-2.1.3.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/plugins.js') }}"></script>

<!-- SweetAlert2 pour les popups Voir / Modifier / Ajouter -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- PapaParse pour l'export CSV -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<!-- JS principal de l'application -->
<script src="{{ url_for('static', filename='js/main.js') }}?v=20251210_1142"></script>

</body>
</html>